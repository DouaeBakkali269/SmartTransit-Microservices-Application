server.port=8080

# Eureka discovery
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.instance.prefer-ip-address=true

# Enable service discovery for gateway
spring.cloud.gateway.discovery.locator.enabled=true
spring.cloud.gateway.discovery.locator.lower-case-service-id=true

# Route filters can reference a circuit breaker named 'defaultCircuitBreaker'
spring.cloud.gateway.routes[0].id=all-services
spring.cloud.gateway.routes[0].uri=lb://

# Circuit breaker configuration (uses Spring Cloud Circuit Breaker + Resilience4j)
resilience4j.circuitbreaker.instances.defaultCircuitBreaker.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.defaultCircuitBreaker.slidingWindowType=COUNT_BASED
resilience4j.circuitbreaker.instances.defaultCircuitBreaker.slidingWindowSize=10
resilience4j.circuitbreaker.instances.defaultCircuitBreaker.failureRateThreshold=50

# Fallback path used by circuit-breaker filter example
gateway.circuitbreaker.fallback-path=/fallback
